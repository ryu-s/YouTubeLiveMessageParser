using NUnit.Framework;
using ryu_s.YouTubeLive.Message;

namespace YouTubeLiveSitePluginTests
{
    public class GetLiveChatParseTests
    {
        [Test]
        public void Test()
        {
            var s = Tools.GetSampleData("GetLiveChat.txt");
            var getLiveChat = GetLiveChat.Parse(s);

        }
        [Test]
        public void Test2()
        {
            var s = Tools.GetSampleData("GetLiveChat_reloadContinuation.txt");
            var getLiveChat = GetLiveChat.Parse(s);
            Assert.AreEqual(0, getLiveChat.Actions.Count);
        }
        [Test]
        public void Test3()
        {
            var raw = "{\"responseContext\":{\"serviceTrackingParams\":[{\"service\":\"CSI\",\"params\":[{\"key\":\"c\",\"value\":\"WEB\"},{\"key\":\"cver\",\"value\":\"2.20211103.01.00\"},{\"key\":\"yt_li\",\"value\":\"1\"},{\"key\":\"GetLiveChat_rid\",\"value\":\"0xaf0b516658e3c64b\"}]},{\"service\":\"GFEEDBACK\",\"params\":[{\"key\":\"logged_in\",\"value\":\"1\"},{\"key\":\"e\",\"value\":\"24002025,23968386,24049820,24036948,24120972,24116772,24084439,24116735,24095153,24028143,23944779,24077266,24118969,24113224,23744176,23882503,24101841,24058380,24059444,23998056,1714241,24116917,24004644,24077241,24125503,24115586,23986022,24106921,24001373,24085381,23946420,24007246,24085811,24075301,39321281,24111165,24119172,23884386,24034168,23966208,24082661,24106628,24111525,24002022,24056274,24118970,23983296,23804281,24007790,23934970,23857950,24064555,24104618,24106839,24059508,24127726,24110902,24116717,24002923,23918597,24080738\"}]},{\"service\":\"GUIDED_HELP\",\"params\":[{\"key\":\"logged_in\",\"value\":\"1\"}]},{\"service\":\"ECATCHER\",\"params\":[{\"key\":\"client.version\",\"value\":\"2.20211103\"},{\"key\":\"client.name\",\"value\":\"WEB\"},{\"key\":\"client.fexp\",\"value\":\"24002025,23968386,24049820,24036948,24120972,24116772,24084439,24116735,24095153,24028143,23944779,24077266,24118969,24113224,23744176,23882503,24101841,24058380,24059444,23998056,1714241,24116917,24004644,24077241,24125503,24115586,23986022,24106921,24001373,24085381,23946420,24007246,24085811,24075301,39321281,24111165,24119172,23884386,24034168,23966208,24082661,24106628,24111525,24002022,24056274,24118970,23983296,23804281,24007790,23934970,23857950,24064555,24104618,24106839,24059508,24127726,24110902,24116717,24002923,23918597,24080738\"}]}],\"mainAppWebResponseContext\":{\"datasyncId\":\"103208314919748213421||104403674241533608904\",\"loggedOut\":false},\"webResponseContextExtensionData\":{\"hasDecorated\":true}},\"trackingParams\":\"CAAQ0b4BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"continuationContents\":{\"liveChatContinuation\":{\"continuations\":[{\"timedContinuationData\":{\"timeoutMs\":4819,\"continuation\":\"0ofMyAOvARpYQ2lrcUp3b1lWVU01Y25WV1dWQjJOM2xLYlZZd1VtZ3dUa3RCTFV4M0VndHJYemhzT0RGU1RtdDNTUm9UNnFqZHVRRU5DZ3RyWHpoc09ERlNUbXQzU1NBQyiHpczTiYb0AjAAQAFKIggAGAAgAEoCCAFQj_HF94eG9AJYA3gAogEAqgECEACwAQBQm_Xv04mG9AJYk-yc-NqF9AKCAQIIBIgBAKAB3_S-1ImG9AI%3D\",\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\"}}],\"actions\":[{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"addChatItemAction\":{\"item\":{\"liveChatTextMessageRenderer\":{\"message\":{\"runs\":[{\"emoji\":{\"emojiId\":\"UCkszU2WH9gy1mb0dV-11UJg/8gF1Xp_zK8jk8gSDrI2wCw\",\"shortcuts\":[\":elbowcough:\"],\"searchTerms\":[\"elbowcough\"],\"image\":{\"thumbnails\":[{\"url\":\"https://yt3.ggpht.com/kWObU3wBMdHS43q6-ib2KJ-iC5tWqe7QcEITaNApbXEZfrik9E57_ve_BEPHO86z4Xrv8ikMdW0=w24-h24-c-k-nd\",\"width\":24,\"height\":24},{\"url\":\"https://yt3.ggpht.com/kWObU3wBMdHS43q6-ib2KJ-iC5tWqe7QcEITaNApbXEZfrik9E57_ve_BEPHO86z4Xrv8ikMdW0=w48-h48-c-k-nd\",\"width\":48,\"height\":48}],\"accessibility\":{\"accessibilityData\":{\"label\":\"elbowcough\"}}},\"isCustomEmoji\":true}},{\"emoji\":{\"emojiId\":\"UCkszU2WH9gy1mb0dV-11UJg/8gF1Xp_zK8jk8gSDrI2wCw\",\"shortcuts\":[\":elbowcough:\"],\"searchTerms\":[\"elbowcough\"],\"image\":{\"thumbnails\":[{\"url\":\"https://yt3.ggpht.com/kWObU3wBMdHS43q6-ib2KJ-iC5tWqe7QcEITaNApbXEZfrik9E57_ve_BEPHO86z4Xrv8ikMdW0=w24-h24-c-k-nd\",\"width\":24,\"height\":24},{\"url\":\"https://yt3.ggpht.com/kWObU3wBMdHS43q6-ib2KJ-iC5tWqe7QcEITaNApbXEZfrik9E57_ve_BEPHO86z4Xrv8ikMdW0=w48-h48-c-k-nd\",\"width\":48,\"height\":48}],\"accessibility\":{\"accessibilityData\":{\"label\":\"elbowcough\"}}},\"isCustomEmoji\":true}},{\"emoji\":{\"emojiId\":\"UCkszU2WH9gy1mb0dV-11UJg/8gF1Xp_zK8jk8gSDrI2wCw\",\"shortcuts\":[\":elbowcough:\"],\"searchTerms\":[\"elbowcough\"],\"image\":{\"thumbnails\":[{\"url\":\"https://yt3.ggpht.com/kWObU3wBMdHS43q6-ib2KJ-iC5tWqe7QcEITaNApbXEZfrik9E57_ve_BEPHO86z4Xrv8ikMdW0=w24-h24-c-k-nd\",\"width\":24,\"height\":24},{\"url\":\"https://yt3.ggpht.com/kWObU3wBMdHS43q6-ib2KJ-iC5tWqe7QcEITaNApbXEZfrik9E57_ve_BEPHO86z4Xrv8ikMdW0=w48-h48-c-k-nd\",\"width\":48,\"height\":48}],\"accessibility\":{\"accessibilityData\":{\"label\":\"elbowcough\"}}},\"isCustomEmoji\":true}}]},\"authorName\":{\"simpleText\":\"choujoutaru kaigaaru\"},\"authorPhoto\":{\"thumbnails\":[{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLRuzpd05s_WOGpepBtn1Q9p3LGnAEurkMC8DSjXdQ=s32-c-k-c0x00ffffff-no-rj\",\"width\":32,\"height\":32},{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLRuzpd05s_WOGpepBtn1Q9p3LGnAEurkMC8DSjXdQ=s64-c-k-c0x00ffffff-no-rj\",\"width\":64,\"height\":64}]},\"contextMenuEndpoint\":{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"commandMetadata\":{\"webCommandMetadata\":{\"ignoreNavigation\":true}},\"liveChatItemContextMenuEndpoint\":{\"params\":\"Q2tjS1JRb2FRMDV4UW5CMFMwcG9kbEZEUmxnM1FuZG5VV1JaVXpCRWVIY1NKME5KVHpKNlNtMUthSFpSUTBaUlowbExaMjlrY0VsWlNXaEJNVFl6TmpJNE1qQTBOek15TUJvcEtpY0tHRlZET1hKMVZsbFFkamQ1U20xV01GSm9NRTVMUVMxTWR4SUxhMTg0YkRneFVrNXJkMGtnQWlnRU1ob0tHRlZEUVRaS2JHOVFMVzlmUzJ0SVgyVXRTelp3TUdjeFFRJTNEJTNE\"}},\"id\":\"CkUKGkNOcUJwdEtKaHZRQ0ZYN0J3Z1FkWVMwRHh3EidDSU8yekptSmh2UUNGUWdJS2dvZHBJWUloQTE2MzYyODIwNDczMjA%3D\",\"timestampUsec\":\"1636282049069333\",\"authorExternalChannelId\":\"UCA6JloP-o_KkH_e-K6p0g1A\",\"contextMenuAccessibility\":{\"accessibilityData\":{\"label\":\"コメントの操作\"}}}},\"clientId\":\"CIO2zJmJhvQCFQgIKgodpIYIhA1636282047320\"}},{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"addChatItemAction\":{\"item\":{\"liveChatTextMessageRenderer\":{\"message\":{\"runs\":[{\"text\":\"師匠に当たる人なら育ての親かな\"}]},\"authorName\":{\"simpleText\":\"#りょう\"},\"authorPhoto\":{\"thumbnails\":[{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLS8Vl2MzrNmgGgr7MCYcYfP3IMJn0mwooy9k2JJ=s32-c-k-c0x00ffffff-no-rj\",\"width\":32,\"height\":32},{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLS8Vl2MzrNmgGgr7MCYcYfP3IMJn0mwooy9k2JJ=s64-c-k-c0x00ffffff-no-rj\",\"width\":64,\"height\":64}]},\"contextMenuEndpoint\":{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"commandMetadata\":{\"webCommandMetadata\":{\"ignoreNavigation\":true}},\"liveChatItemContextMenuEndpoint\":{\"params\":\"Q2pzS09Rb2FRMHB5ZG5wT1MwcG9kbEZEUmxSVllqVjNiMlJUT1dkUGEwRVNHME5LVERBMGNUY3RhR1pSUTBaWVdrTnVVV3RrZWxaRlRYRlJNeG9wS2ljS0dGVkRPWEoxVmxsUWRqZDVTbTFXTUZKb01FNUxRUzFNZHhJTGExODRiRGd4VWs1cmQwa2dBaWdFTWhvS0dGVkRWRFl0U0d0NFQzRnhOMFpFYTNveWFGaDRVakoxZHclM0QlM0Q=\"}},\"id\":\"CjkKGkNKcnZ6TktKaHZRQ0ZUVWI1d29kUzlnT2tBEhtDSkwwNHE3LWhmUUNGWFpDblFrZHpWRU1xUTM%3D\",\"timestampUsec\":\"1636282049705925\",\"authorBadges\":[{\"liveChatAuthorBadgeRenderer\":{\"customThumbnail\":{\"thumbnails\":[{\"url\":\"https://yt3.ggpht.com/bAedR8W1DMFjBJ8A5YfEhnNjJ86fuhkWRDB1xHfbmGTXtE056AiJbRQtFMKOUCddvxuo2c9UwQ=s16-c-k\"},{\"url\":\"https://yt3.ggpht.com/bAedR8W1DMFjBJ8A5YfEhnNjJ86fuhkWRDB1xHfbmGTXtE056AiJbRQtFMKOUCddvxuo2c9UwQ=s32-c-k\"}]},\"tooltip\":\"メンバー（1 か月）\",\"accessibility\":{\"accessibilityData\":{\"label\":\"メンバー（1 か月）\"}}}}],\"authorExternalChannelId\":\"UCT6-HkxOqq7FDkz2hXxR2uw\",\"contextMenuAccessibility\":{\"accessibilityData\":{\"label\":\"コメントの操作\"}}}},\"clientId\":\"CJL04q7-hfQCFXZCnQkdzVEMqQ3\"}},{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"addChatItemAction\":{\"item\":{\"liveChatPaidMessageRenderer\":{\"id\":\"ChwKGkNNVGh0TS1KaHZRQ0ZRTEJ3Z1FkcFVJQ2RR\",\"timestampUsec\":\"1636282050665154\",\"authorName\":{\"simpleText\":\"雅治[まさじ]福山\"},\"authorPhoto\":{\"thumbnails\":[{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLRAxcyZJI-x82-MvOwXSuK7DTdkmuSLZ7qvJ66I=s32-c-k-c0x00ffffff-no-rj\",\"width\":32,\"height\":32},{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLRAxcyZJI-x82-MvOwXSuK7DTdkmuSLZ7qvJ66I=s64-c-k-c0x00ffffff-no-rj\",\"width\":64,\"height\":64}]},\"purchaseAmountText\":{\"simpleText\":\"￥100\"},\"headerBackgroundColor\":4279592384,\"headerTextColor\":4294967295,\"bodyBackgroundColor\":4280191205,\"bodyTextColor\":4294967295,\"authorExternalChannelId\":\"UCWbIat1kOI28ayVefxh0Tow\",\"authorNameTextColor\":3019898879,\"contextMenuEndpoint\":{\"clickTrackingParams\":\"CAIQ7rsEIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"commandMetadata\":{\"webCommandMetadata\":{\"ignoreNavigation\":true}},\"liveChatItemContextMenuEndpoint\":{\"params\":\"Q2g0S0hBb2FRMDFVYUhSTkxVcG9kbEZEUmxGTVFuZG5VV1J3VlVsRFpGRWFLU29uQ2hoVlF6bHlkVlpaVUhZM2VVcHRWakJTYURCT1MwRXRUSGNTQzJ0Zk9HdzRNVkpPYTNkSklBSW9CRElhQ2hoVlExZGlTV0YwTVd0UFNUSTRZWGxXWldaNGFEQlViM2MlM0Q=\"}},\"timestampColor\":2164260863,\"contextMenuAccessibility\":{\"accessibilityData\":{\"label\":\"コメントの操作\"}},\"trackingParams\":\"CAIQ7rsEIhMIg_W01ImG9AIVRbuPCh2qhQXf\"}}}},{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"addChatItemAction\":{\"item\":{\"liveChatTextMessageRenderer\":{\"message\":{\"runs\":[{\"text\":\"無　科\"}]},\"authorName\":{\"simpleText\":\"化ケモノ青年\"},\"authorPhoto\":{\"thumbnails\":[{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLRZVqqA3rd0CaD0QupDbd7-0oKUiBvTL-Re1r1N3j0wYA=s32-c-k-c0x00ffffff-no-rj\",\"width\":32,\"height\":32},{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLRZVqqA3rd0CaD0QupDbd7-0oKUiBvTL-Re1r1N3j0wYA=s64-c-k-c0x00ffffff-no-rj\",\"width\":64,\"height\":64}]},\"contextMenuEndpoint\":{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"commandMetadata\":{\"webCommandMetadata\":{\"ignoreNavigation\":true}},\"liveChatItemContextMenuEndpoint\":{\"params\":\"Q2p3S09nb2FRMDlYY25jNVQwcG9kbEZEUmxkSlpHWlJiMlJZTVdORk5tY1NIRU5OWHpObmRVZzBhR1pSUTBaWk5VSm9VVzlrTTNGWlJHaFJMVFVhS1NvbkNoaFZRemx5ZFZaWlVIWTNlVXB0VmpCU2FEQk9TMEV0VEhjU0MydGZPR3c0TVZKT2EzZEpJQUlvQkRJYUNoaFZRMjVMVFRCVlVtZDRSa1ZpTVZFMmFHSXRiMmc1VTNjJTNE\"}},\"id\":\"CjoKGkNPV3J3OU9KaHZRQ0ZXSWRmUW9kWDFjRTZnEhxDTV8zZ3VINGhmUUNGWTVCaFFvZDNxWURoUS01\",\"timestampUsec\":\"1636282051647004\",\"authorBadges\":[{\"liveChatAuthorBadgeRenderer\":{\"customThumbnail\":{\"thumbnails\":[{\"url\":\"https://yt3.ggpht.com/XDvNEGSKzHHPvjN9uq9osJfJ8IfC60OrFTuLnKjDwZhOgyjQcS9MWNk2KBHS6eIAsJqUnQT61ys=s16-c-k\"},{\"url\":\"https://yt3.ggpht.com/XDvNEGSKzHHPvjN9uq9osJfJ8IfC60OrFTuLnKjDwZhOgyjQcS9MWNk2KBHS6eIAsJqUnQT61ys=s32-c-k\"}]},\"tooltip\":\"メンバー（6 か月）\",\"accessibility\":{\"accessibilityData\":{\"label\":\"メンバー（6 か月）\"}}}}],\"authorExternalChannelId\":\"UCnKM0URgxFEb1Q6hb-oh9Sw\",\"contextMenuAccessibility\":{\"accessibilityData\":{\"label\":\"コメントの操作\"}}}},\"clientId\":\"CM_3guH4hfQCFY5BhQod3qYDhQ-5\"}},{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"addChatItemAction\":{\"item\":{\"liveChatTextMessageRenderer\":{\"message\":{\"runs\":[{\"text\":\"後ろに柄悪い人いて草\"}]},\"authorName\":{\"simpleText\":\"りゅ！\"},\"authorPhoto\":{\"thumbnails\":[{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLQBK6xrh2al6njgqAJuB4Hk6ql1OscB4M7_1elNjhdDGA8t6_f9gZOQRVv53v26fOqQPMk=s32-c-k-c0x00ffffff-no-rj\",\"width\":32,\"height\":32},{\"url\":\"https://yt4.ggpht.com/ytc/AKedOLQBK6xrh2al6njgqAJuB4Hk6ql1OscB4M7_1elNjhdDGA8t6_f9gZOQRVv53v26fOqQPMk=s64-c-k-c0x00ffffff-no-rj\",\"width\":64,\"height\":64}]},\"contextMenuEndpoint\":{\"clickTrackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\",\"commandMetadata\":{\"webCommandMetadata\":{\"ignoreNavigation\":true}},\"liveChatItemContextMenuEndpoint\":{\"params\":\"Q2owS093b2FRMDU1YTNwT1QwcG9kbEZEUm1KelZuSlJXV1F6ZWsxTFRtY1NIVU5MVEZaM1luSTRhR1pSUTBaUmQzcFhRVzlrVkVkalIySlJMVFkzR2lrcUp3b1lWVU01Y25WV1dWQjJOM2xLYlZZd1VtZ3dUa3RCTFV4M0VndHJYemhzT0RGU1RtdDNTU0FDS0FReUdnb1lWVU13UlZNemFrTnhZVWwwVlVWdlkwNTRNMUpDVms5Qg==\"}},\"id\":\"CjsKGkNOeWt6Tk9KaHZRQ0Zic1ZyUVlkM3pNS05nEh1DS0xWd2JyOGhmUUNGUXd6V0FvZFRHY0diUS02Nw%3D%3D\",\"timestampUsec\":\"1636282051793543\",\"authorBadges\":[{\"liveChatAuthorBadgeRenderer\":{\"customThumbnail\":{\"thumbnails\":[{\"url\":\"https://yt3.ggpht.com/W5wR5Vi2qOyO468v70WYUxXvMiEAOM0pbDH2fR3ifmHzH676OxE2HW-ZmpSiQZMo2v2ccwGtNQ=s16-c-k\"},{\"url\":\"https://yt3.ggpht.com/W5wR5Vi2qOyO468v70WYUxXvMiEAOM0pbDH2fR3ifmHzH676OxE2HW-ZmpSiQZMo2v2ccwGtNQ=s32-c-k\"}]},\"tooltip\":\"メンバー（2 か月）\",\"accessibility\":{\"accessibilityData\":{\"label\":\"メンバー（2 か月）\"}}}}],\"authorExternalChannelId\":\"UC0ES3jCqaItUEocNx3RBVOA\",\"contextMenuAccessibility\":{\"accessibilityData\":{\"label\":\"コメントの操作\"}}}},\"clientId\":\"CKLVwbr8hfQCFQwzWAodTGcGbQ-67\"}}],\"trackingParams\":\"CAEQl98BIhMIg_W01ImG9AIVRbuPCh2qhQXf\"}}}";
            var getLiveChat = GetLiveChat.Parse(raw);
        }
        [Test]
        public void NoContinuationTest()
        {
            var getLiveChat = GetLiveChat.Parse("{}");
            Assert.IsNull(getLiveChat.Continuation);
            Assert.AreEqual(0, getLiveChat.Actions.Count);
        }
    }
}